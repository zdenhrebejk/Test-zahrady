<!DOCTYPE html>
<html>
  <head>
    <meta charset="UTF-8" />
    <script src="https://cdn.emailjs.com/dist/email.min.js"></script>
    <script>
      // Inicializace EmailJS
      (function () {
        emailjs.init("jgIPteokbr7hfxXk_"); // â† nahraÄ svÃ½m USER ID
        console.log("âœ… EmailJS inicializovÃ¡n");
      })();

      // PÅ™ekryvnÃ½ box pro vÃ½sledek
      function showResult(msg, type) {
        const el = document.createElement("div");
        el.innerText = msg;
        el.style.position = "fixed";
        el.style.top = "30px";
        el.style.left = "50%";
        el.style.transform = "translateX(-50%)";
        el.style.padding = "14px 24px";
        el.style.backgroundColor = type === "success" ? "#28a745" : "#dc3545";
        el.style.color = "#fff";
        el.style.fontSize = "16px";
        el.style.fontWeight = "bold";
        el.style.borderRadius = "8px";
        el.style.boxShadow = "0 4px 12px rgba(0,0,0,0.4)";
        el.style.zIndex = 9999;
        el.style.opacity = 1;
        el.style.transition = "opacity 0.5s ease";
        document.body.appendChild(el);
        setTimeout(() => {
          el.style.opacity = 0;
          setTimeout(() => document.body.removeChild(el), 500);
        }, 4000);
      }

      // OdeslÃ¡nÃ­ e-mailu
      function sendEmail(data) {
        console.log("ğŸ“© OdesÃ­lÃ¡m e-mail s daty:", data);

        emailjs.send("gmail", "template_sfiw4ow", data).then(
          function (response) {
            console.log("âœ… E-mail odeslÃ¡n:", response);
            showResult("âœ… E-mail byl ÃºspÄ›Å¡nÄ› odeslÃ¡n.", "success");
            window.postMessage("SUCCESS", "*");
          },
          function (error) {
            console.error("âŒ Chyba pÅ™i odesÃ­lÃ¡nÃ­:", error);
            showResult("âŒ Chyba pÅ™i odesÃ­lÃ¡nÃ­ e-mailu.", "error");
            window.postMessage("ERROR", "*");
          }
        );
      }

      // PoslouchÃ¡me zprÃ¡vu od Streamlit
      window.addEventListener("message", function (event) {
        if (event.data && event.data.type === "SEND_EMAIL") {
          sendEmail(event.data.payload);
        }
      });
    </script>
  </head>
  <body>
    <p>âœ… EmailJS komponenta nahrÃ¡na (verze 1.6)</p>
    <script>
      document.body.insertAdjacentHTML(
        "beforeend",
        "<p id='debug'>ğŸ§ª JavaScript aktivnÃ­</p>"
      );
    </script>
  </body>
</html>
